# Алгоритм 2

Подход
- Поиск по векторам по людям
- Использование предоставленного справочника вузов
- Сортировка результата по географической близости

Детали
- Эмбеддинги построены по отдельным людям из источника данных (как в варианте 1)
- Поиск наиболее похожих людей по косинусному расстоянию
- Определение списка наиболее популярных факультетов среди выбранной группы
- Поиск направлений в справочнике вузов через вектора 
- Получение списка университетов в которых есть найденные факультеты
- Вывод факультетов и отсортированного списка университетов с учетом географической удаленности

## создание необходимых структур в базе

Create_2.sql
 - создает необходимые таблицы и хранимые функции в базе в которые заливаются данные описанными ниже скриптами и в последствии по ним выполняется финальный селект решающий основную задачу

## скрипты анализа и подготовки данных

data_research_edu.ipynb
 - чистит и заливает в базу справочник вузов с первой закладки из Вузы РФ (от 07.12.23).xlsx
 - добавляет географические координаты по городам вузов и где не нашлось по городам, добавляет по почтовым индексам

data_research_vk.ipynb
 - принимает на вход h_raw_data.csv выгруженый из одноименной таблицы из базы
 - формирует faculty.csv, univercity.csv

translate.ipynb
 - предобработка факультетов из VK данных и перевод на русский через google translate
 - принимает на вход faculty.csv который формируется с помощью data_research_vk.ipynb
 - формирует faculty_fixed.csv, faculty_fixed_translated.csv

 - принимает на вход h_raw_data.csv
 - формирует h_raw_data_ru.csv дополненый колонками с переводом факультетов (для пересылке другим членам команды)

faculties_vk2db.ipynb
 - заливка в базу переведенных факультетов из VK данных и построенные по переводу вектора для "мягкого" джоина на справочник из другого источника где названия не совпадают полностью
 - принимает на вход faculty_fixed.csv, faculty_fixed_translated.csv

## скрипты прототипа с запросами выполняющими задачу

univercity_dictionary_v1.ipynb
 - пример первой версии селекта по справочнику вузов

univercity_dictionary_v2.ipynb
 - финальная версия селекта который выполняет всю задачу целиком от поиска по VK данным с джоином на справочник вузов и сортировкой по географической близости

## скрипты проверки используемых технических возможностей

postcode_test.ipynb
 - проверка возможности получения географических координат по почтовому индексу

pg_test.ipynb
 - проверка подключения к базе данных postgresql